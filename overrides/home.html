{% extends "main.html" %}

{% block scripts %}
{{ super() }}
<script>
    // Sync custom theme toggle with MkDocs Material palette
    document.addEventListener('DOMContentLoaded', function() {
        const toggle = document.getElementById('dark-light-toggle');
        
        if (!toggle) return;
        
        // Get current theme from MkDocs Material
        function getCurrentTheme() {
            const scheme = document.body.getAttribute('data-md-color-scheme');
            return scheme === 'slate' ? 'dark' : 'light';
        }
        
        // Update theme images based on current theme
        function updateThemeImages(theme) {
            const lightImages = document.querySelectorAll(".theme-image:not(.dark)");
            const darkImages = document.querySelectorAll(".theme-image.dark");
            
            if (theme === 'light') {
                lightImages.forEach(img => img.style.display = "block");
                darkImages.forEach(img => img.style.display = "none");
                toggle.src = toggle.src.replace("toggleActive", "toggleInactive");
            } else {
                lightImages.forEach(img => img.style.display = "none");
                darkImages.forEach(img => img.style.display = "block");
                toggle.src = toggle.src.replace("toggleInactive", "toggleActive");
            }
        }
        
        // Initialize on page load
        updateThemeImages(getCurrentTheme());
        
        // Watch for theme changes from MkDocs palette switcher
        const observer = new MutationObserver(function() {
            updateThemeImages(getCurrentTheme());
        });
        
        observer.observe(document.body, {
            attributes: true,
            attributeFilter: ['data-md-color-scheme']
        });
        
        // Make custom toggle button trigger MkDocs palette switcher
        window.toggleDarkLight = function() {
            const currentTheme = getCurrentTheme();
            const palette = document.querySelector("[data-md-component=palette]");
            
            if (palette) {
                // Find the palette input for the opposite theme
                const targetScheme = currentTheme === 'light' ? 'slate' : 'default';
                const input = palette.querySelector(`input[data-md-color-scheme="${targetScheme}"]`);
                
                if (input) {
                    input.click();
                } else {
                    // Fallback: click any palette input
                    const anyInput = palette.querySelector('input[data-md-color-scheme]');
                    if (anyInput) anyInput.click();
                }
            }
        };
    });
</script>
{% endblock %}

{% block extrahead %}
{{ super() }}
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Yomitan Wiki</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="styles.css" />
{% endblock %}

{% block content %}
{% if page.url == "" %}

<section class="hero">
    <div style="max-width: 60rem;">
        <h1 class="gradient-text">Yomitan</h1>
        <p>
            Powerful and versatile pop-up dictionary for language learning used by
            100,000+ language learners.
        </p>
        <div class="cta-buttons">
            <a href="https://chrome.google.com/webstore/detail/yomitan/likgccmbimhjbgkjambclfkhldnlhbnn" aria-label="Get Yomitan for Chrome">
                <button>
                    <img style="margin-right: 0.5rem" width="18" height="18" src="assets/icons/chrome.svg" alt="Chrome icon">
                    <span>Get Yomitan <small>Chrome</small></span>
                </button>
            </a>
            <a href="https://addons.mozilla.org/en-US/firefox/addon/yomitan/" aria-label="Get Yomitan for Firefox">
                <button>
                    <img style="margin-right: 0.5rem" width="18" height="18" src="assets/icons/firefox.svg" alt="Firefox icon">
                    <span>Get Yomitan <small>Firefox</small></span>
                </button>
            </a>
            <a href="https://microsoftedge.microsoft.com/addons/detail/yomitan/idelnfbbmikgfiejhgmddlbkfgiifnnn" aria-label="Get Yomitan for Edge">
                <button>
                    <img style="margin-right: 0.5rem" width="18" height="18" src="assets/icons/edge.svg" alt="Edge icon">
                    <span>Get Yomitan <small>Edge</small></span>
                </button>
            </a>
        </div>
        <div style="margin-top: 1rem" class="cta-buttons-2">
            <div></div>
            <a href="getting-started">
                <button>Go to our Getting Started guide â†’</button>
            </a>
            <div></div>
        </div>
    </div>
</section>

<section class="feature-section">
    <h1 class="feature-label">More than just a dictionary</h1>

    <div class="feature left">
        <div class="feature-text">
            <h2>Dynamic Popup</h2>
            <p>
                Yomitan makes looking up words <strong>effortless</strong>â€”whether you're reading a book,
                browsing the web, or watching movies. Say goodbye to switching tabs or
                opening external apps: just <strong>hover and press a key</strong> to instantly see
                detailed definitions, word frequencies, native audio, example sentences,
                and moreâ€”right where you are.
            </p>
            <p>
                Designed to keep you in the flow, Yomitan helps
                you <strong>stay immersed</strong>, whether you're deep into a novel or
                casually scrolling online.
            </p>
            <p><a href="getting-started">Learn more â†’</a></p>
        </div>
        <div class="feature-image-container" style="margin-left: auto;">
            <div class="tooltip-container">
                <div class="tooltip"><strong>Dynamic Popup</strong></div>
                <a href="getting-started">
                    <img class="feature-image" width="96%" height="96%" src="./assets/scanning-popup.webp" alt="Dynamic Popup" />
                </a>
            </div>
        </div>
    </div>

    <div class="feature right">
        <div class="feature-text">
            <h2>Native Audio</h2>
            <p>
                Stumped by the pronunciation of a word? Just hover and listen. Yomitan provides <strong>high quality
                    audio</strong> for almost every wordâ€”voiced clearly by real native speakers.
            </p>
            <p>
                If the default sources don't meet your needs, Yomitan lets you add your <strong>custom audio
                    sources</strong>: You can pull audio from massive pronunciation libraries such as Forvo, or enable text-to-speech
                with a variety of different voices. Yomitan can even export audio directly to your <strong>Anki
                    flashcards</strong>, so you can always hear it when you review.
            </p>
            <p><a href="advanced#audio">Learn more â†’</a></p>
        </div>
        <div class="feature-image-container">
            <div class="tooltip-container">
                <div class="tooltip"><strong>Native Audio</strong></div>
                <a href="advanced#audio">
                    <img class="feature-image" width="90%" height="90%" src="./assets/audio.webp" alt="Audio" />
                </a>
            </div>
        </div>
    </div>

    <div class="feature left">
        <div class="feature-text">
            <h2>Personalize Your Experience</h2>
            <p>
                Want to go for bold and colorful or prefer a clean, minimalist look? Yomitan gives you full control over
                how your popup appears, so you feel right at home when you do lookups.
            </p>
            <p>Create your own theme, or choose one from the various community themes.</p>
            <p><a href="tools-resources">Learn more â†’</a></p>
        </div>

        <div class="feature-image-container">
            <div class="slideshow-container">
                <div class="tooltip-container">
                    <div class="tooltip"><strong>Themes</strong></div>
                    
                    <div class="mySlides">
                        <div style="display: flex; position: absolute; top: -24px;">
                            <small>Bint's Japanese CSS
                                <a class="ext-link-icon" href="https://github.com/yomidevs/yomitan-featured-css/tree/main/bint's%20yomitan%20css" aria-label="View Bint's CSS">
                                    <svg style="width: 11px; height: 11px;" class="bounce-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                        <path fill="currentcolor" d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z" />
                                    </svg>
                                </a>
                            </small>
                        </div>
                        <a href="tools-resources">
                            <img class="feature-image theme-image" src="assets/themes/light/bint-css.png" style="width:100%" alt="Bint's theme light mode">
                            <img class="feature-image theme-image dark" src="assets/themes/dark/bint-css.png" style="width:100%" alt="Bint's theme dark mode">
                        </a>
                    </div>

                    <div class="mySlides">
                        <div style="display: flex; position: absolute; top: -24px;">
                            <small>Yomitan Colored CSS
                                <a class="ext-link-icon" href="https://github.com/yomidevs/yomichan-dict-css" aria-label="View Colored CSS">
                                    <svg style="width: 11px; height: 11px;" class="bounce-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                        <path fill="currentcolor" d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z" />
                                    </svg>
                                </a>
                            </small>
                        </div>
                        <a href="tools-resources">
                            <img class="feature-image theme-image" src="assets/themes/light/colored-css.png" style="width:100%" alt="Colored theme light mode">
                            <img class="feature-image theme-image dark" src="assets/themes/dark/colored-css.png" style="width:100%" alt="Colored theme dark mode">
                        </a>
                    </div>
                    
                    <div class="mySlides">
                        <div style="display: flex; position: absolute; top: -24px;">
                            <small>Nelan's Glassy CSS
                                <a class="ext-link-icon" href="https://github.com/yomidevs/yomitan-featured-css/tree/main/nelan's%20yomitan%20css" aria-label="View Nelan's CSS">
                                    <svg style="width: 11px; height: 11px;" class="bounce-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                        <path fill="currentcolor" d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z" />
                                    </svg>
                                </a>
                            </small>
                        </div>
                        <a href="tools-resources">
                            <img class="feature-image theme-image" src="assets/themes/light/nelan-css.png" style="width:100%" alt="Colored theme light mode">
                            <img class="feature-image theme-image dark" src="assets/themes/dark/nelan-css.png" style="width:100%" alt="Colored theme dark mode">
                        </a>
                    </div>
                </div>
                
                <div style="text-align:center; transform: translateY(20px);">
                    <span class="dot" onclick="currentSlide(1)" aria-label="Go to slide 1"></span>
                    <span class="dot" onclick="currentSlide(2)" aria-label="Go to slide 2"></span>
                    <span class="dot" onclick="currentSlide(3)" aria-label="Go to slide 3"></span>
                </div>

                <a class="prev" onclick="plusSlides(-1)" aria-label="Previous slide">&#10094;</a>
                <a class="next" onclick="plusSlides(1)" aria-label="Next slide">&#10095;</a>
            </div>
        </div>
    </div>
</section>

<section class="feature-section" style="padding-top: 0;">
    <div class="anki-feature">
        <h1 class="feature-label" style="text-align: center;">Powerful Anki flashcards integration</h1>

        <div style="display: flex; flex-direction: row; justify-content: center;">
            <div class="demo" style="max-width: 850px;">
                <p class="anki-feature-text" style="text-align: center;">
                    Learning doesn't stop at the lookup. Turn your lookups into
                    <strong>rich and beautifully formatted Anki flashcards</strong>
                    and send them straight to your deck with a single keypress. See what our users have created:
                </p>
                <video class="anki-feature-video" width="800" height="450" autoplay controls muted
                    src="https://github.com/user-attachments/assets/e3210e84-be5f-48ba-a335-ab8bbd103750"
                    style="max-width: 100%; border-radius: 0.75rem"></video>

                <p style="margin-top: 1.5rem;">
                    <small>BrenoAqua's Senren Note Type
                        <a class="ext-link-icon" href="https://brenoaqua.github.io/Senren/" aria-label="View Senren Note Type">
                            <svg style="width: 11px; height: 11px;" class="bounce-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="currentcolor" d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z" />
                            </svg>
                        </a>
                    </small>
                </p>

                <p><a href="anki">Learn more â†’</a></p>
            </div>
        </div>
    </div>
</section>

<section class="feature-section light">
    <div class="demo">
        <h2>ðŸš€ See Yomitan in Action</h2>
        <p>Watch how quickly Yomitan simplifies your reading and vocabulary building.</p>
        <iframe width="800" height="450" src="https://www.youtube.com/embed/9DLsA94N1ZE"
            style="margin-top: 1.5rem; max-width: 100%; border-radius: 0.75rem" 
            frameborder="0" allowfullscreen 
            title="Yomitan demo video"></iframe>

        <div style="margin-top: 1rem" class="cta-buttons-2">
            <a href="getting-started">
                <button>Get Started â†’</button>
            </a>
        </div>
    </div>
</section>

<script>
    // ===== SLIDESHOW =====
    let slideIndex = 1;
    showSlides(slideIndex);

    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    function currentSlide(n) {
        showSlides(slideIndex = n);
    }

    function showSlides(n) {
        const slides = document.getElementsByClassName("mySlides");
        const dots = document.getElementsByClassName("dot");
        
        if (n > slides.length) slideIndex = 1;
        if (n < 1) slideIndex = slides.length;
        
        Array.from(slides).forEach(slide => slide.style.display = "none");
        Array.from(dots).forEach(dot => dot.classList.remove("active"));
        
        slides[slideIndex - 1].style.display = "block";
        dots[slideIndex - 1].classList.add("active");
    }

    // ===== INTERSECTION OBSERVER FOR ANIMATIONS =====
    const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px"
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add("visible");
            }
        });
    }, observerOptions);

    // Observe all animated elements
    document.querySelectorAll(".feature, .anki-feature").forEach(el => observer.observe(el));
</script>

{% else %}
{{ super() }}
{% endif %}
{% endblock %}